(window.webpackJsonp=window.webpackJsonp||[]).push([[458],{2791:function(module,exports,__webpack_require__){"use strict";__webpack_require__(4),__webpack_require__(11),__webpack_require__(12);var _defineProperty=__webpack_require__(68);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}__webpack_require__(73),__webpack_require__(5),__webpack_require__(27),__webpack_require__(6),__webpack_require__(10),__webpack_require__(9),Object.defineProperty(exports,"__esModule",{value:!0}),exports.lieLevel=exports.fitLevel=exports.calculateFit=exports.sumHs=exports.computeStens=exports.computeTransposedValue=void 0;var SelfKnowledgeSurvey_1=__webpack_require__(2381),Sten_1=__webpack_require__(2373);function computeTransposedValue(question){if(void 0===question.value)throw new TypeError("No value given for question: ".concat(question.id));switch(question.type){case SelfKnowledgeSurvey_1.SurveyQuestionTypes.SCALE:return question.reversed?6-question.value:question.value-1;case SelfKnowledgeSurvey_1.SurveyQuestionTypes.TRUEFALSE:if(void 0===question.weight)throw new TypeError("No weight specified for TRUEFALSE question: ".concat(question.id));return(question.value+Number(question.reversed||0))%2*question.weight;case SelfKnowledgeSurvey_1.SurveyQuestionTypes.CHOICES:return question.value-1;default:throw new Error("Unrecognized Survey question type: ".concat(question.type))}}exports.computeTransposedValue=computeTransposedValue,exports.computeStens=function computeStens(hs){return Object.keys(hs).map((function(key){var factor=key;return factor===SelfKnowledgeSurvey_1.SurveyFactorTypes.LIE?_defineProperty({},factor,hs[factor]):_defineProperty({},factor,(hs[factor]-SelfKnowledgeSurvey_1.stenParams[factor].miValue)/SelfKnowledgeSurvey_1.stenParams[factor].roValue*2+5.5)})).reduce((function(previousValue,currentValue){return _objectSpread(_objectSpread({},previousValue),currentValue)}))},exports.sumHs=function sumHs(questions){var hs=SelfKnowledgeSurvey_1.initStenResults;return questions.forEach((function(question){hs[question.factors]+=computeTransposedValue(question)})),hs},exports.calculateFit=function calculateFit(stens){return Object.keys(stens).filter((function(key){return key!==SelfKnowledgeSurvey_1.SurveyFactorTypes.LIE})).map((function(key){var ceiledSten=Math.ceil(stens[key]),weightedValue=SelfKnowledgeSurvey_1.impactTransformation[SelfKnowledgeSurvey_1.impactConfiguration[key]][ceiledSten];return _defineProperty({},key,weightedValue)})).reduce((function(previousValue,currentValue){return _objectSpread(_objectSpread({},previousValue),currentValue)}))},exports.fitLevel=function fitLevel(fit){return fit>=6?Sten_1.FitLevel.FIT:fit>=-6?Sten_1.FitLevel.MAYBE_FIT:Sten_1.FitLevel.NO_FIT},exports.lieLevel=function lieLevel(lie){return lie<5?Sten_1.LieLevel.OK:lie<=7?Sten_1.LieLevel.UNSURE:Sten_1.LieLevel.BEWARE}},2972:function(module,exports,__webpack_require__){"use strict";__webpack_require__(6),__webpack_require__(4),__webpack_require__(9),__webpack_require__(5),__webpack_require__(11),__webpack_require__(10),__webpack_require__(12);var _defineProperty=__webpack_require__(68),_asyncToGenerator=__webpack_require__(59);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}__webpack_require__(204),__webpack_require__(46),Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadSurveyById=exports.loadLastUsersSurvey=exports.submitAndEvaluateSurvey=void 0;var firestore_1=__webpack_require__(120),selfKnowledge_1=__webpack_require__(2791),firebase_1=__webpack_require__(82);function _submitAndEvaluateSurvey(){return(_submitAndEvaluateSurvey=_asyncToGenerator(regeneratorRuntime.mark((function _callee(userId,survey){var hs,stens,fit,data;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return hs=(0,selfKnowledge_1.sumHs)(survey.questions),stens=(0,selfKnowledge_1.computeStens)(hs),fit=(0,selfKnowledge_1.calculateFit)(stens),data=_objectSpread(_objectSpread({},survey),{},{userId:userId,stens:stens,fit:fit}),_context.next=6,(0,firebase_1.createDocument)(firebase_1.collections.selfKnowledgeSurveys,data,{withTimestamps:!0,withSoftDelete:!0});case 6:return _context.abrupt("return",_context.sent);case 7:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}function _loadLastUsersSurvey(){return(_loadLastUsersSurvey=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(userId){return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,(0,firebase_1.listDocuments)((0,firestore_1.query)(firebase_1.collections.selfKnowledgeSurveys,(0,firestore_1.where)("userId","==",userId)));case 2:return _context2.abrupt("return",_context2.sent.sort((function(a,b){return a.createdAt>=b.createdAt?1:-1})).pop());case 3:case"end":return _context2.stop()}}),_callee2)})))).apply(this,arguments)}function _loadSurveyById(){return(_loadSurveyById=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(surveyId){return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,(0,firebase_1.loadDocumentOrFail)(firebase_1.collections.selfKnowledgeSurveys,surveyId);case 2:return _context3.abrupt("return",_context3.sent);case 3:case"end":return _context3.stop()}}),_callee3)})))).apply(this,arguments)}exports.submitAndEvaluateSurvey=function submitAndEvaluateSurvey(_x,_x2){return _submitAndEvaluateSurvey.apply(this,arguments)},exports.loadLastUsersSurvey=function loadLastUsersSurvey(_x3){return _loadLastUsersSurvey.apply(this,arguments)},exports.loadSurveyById=function loadSurveyById(_x4){return _loadSurveyById.apply(this,arguments)}},3470:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_id_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3471),_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_id_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_id_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__);for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_id_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_id_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__[key]}))}(__WEBPACK_IMPORT_KEY__);__webpack_exports__.default=_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_id_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default.a},3471:function(module,exports,__webpack_require__){"use strict";__webpack_require__(6),__webpack_require__(4),__webpack_require__(9),__webpack_require__(5),__webpack_require__(11),__webpack_require__(10),__webpack_require__(12);var _defineProperty=__webpack_require__(68),_asyncToGenerator=__webpack_require__(59);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}__webpack_require__(46);var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var vue_1=__importDefault(__webpack_require__(7)),vuex_1=__webpack_require__(142),SurveyResults_vue_1=__importDefault(__webpack_require__(2165)),SelfKnowledgeService_1=__webpack_require__(2972),getter_types_1=__webpack_require__(128);exports.default=vue_1.default.extend({components:{SurveyResults:SurveyResults_vue_1.default},layout:"default.auth",data:function data(){return{isLoading:!1,survey:void 0}},fetch:function fetch(){var _this=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _this.isLoading=!0,_context.next=3,(0,SelfKnowledgeService_1.loadSurveyById)(_this.$route.params.id);case 3:_this.survey=_context.sent,_this.survey&&_this.survey.userId===_this.APPLICATION_USER_ID||_this.$nuxt.error({statusCode:404}),_this.isLoading=!1;case 6:case"end":return _context.stop()}}),_callee)})))()},computed:function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},(0,vuex_1.mapGetters)([getter_types_1.APPLICATION_USER_ID]))})},4024:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return render})),__webpack_require__.d(__webpack_exports__,"b",(function(){return staticRenderFns}));var render=function(){var _h=this.$createElement,_c=this._self._c||_h;return this.isLoading?this._e():_c("div",[this.survey.stens?_c("SurveyResults",{attrs:{"show-interpretations":"",sten:this.survey.stens}}):_c("p",[this._v("\n        Dotazník neobsahuje potrebné dáta na zobrazenie grafu s výsledkami\n        sebapoznania. Kontaktujte nás\n        "),_c("a",{staticClass:"link",attrs:{href:"mailto:sebapoznanie@growni.sk"}},[this._v("sebapoznanie@growni.sk")])])],1)},staticRenderFns=[]},4124:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _id_vue_vue_type_template_id_1cb9ad31___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4024),_id_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3470);for(var __WEBPACK_IMPORT_KEY__ in _id_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _id_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__[key]}))}(__WEBPACK_IMPORT_KEY__);var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8);const __vuedocgen_export_0=Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__.a)(_id_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__.default,_id_vue_vue_type_template_id_1cb9ad31___WEBPACK_IMPORTED_MODULE_0__.a,_id_vue_vue_type_template_id_1cb9ad31___WEBPACK_IMPORTED_MODULE_0__.b,!1,null,null,null).exports;__webpack_exports__.default=__vuedocgen_export_0,__vuedocgen_export_0.__docgenInfo={exportName:"default",displayName:"_id",description:"",tags:{}}}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[13,169,171,172],{1753:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _ChatHead_vue_vue_type_template_id_7916c99a___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2775),_ChatHead_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2361);for(var __WEBPACK_IMPORT_KEY__ in _ChatHead_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _ChatHead_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__[key]}))}(__WEBPACK_IMPORT_KEY__);var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(11);const __vuedocgen_export_0=Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__.a)(_ChatHead_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__.default,_ChatHead_vue_vue_type_template_id_7916c99a___WEBPACK_IMPORTED_MODULE_0__.a,_ChatHead_vue_vue_type_template_id_7916c99a___WEBPACK_IMPORTED_MODULE_0__.b,!1,null,null,null).exports;__webpack_exports__.default=__vuedocgen_export_0,__vuedocgen_export_0.__docgenInfo={exportName:"default",displayName:"ChatHead",description:"",tags:{},props:[{name:"profile",type:{name:"UserProfile"},required:!0}]}},1819:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _Chat_vue_vue_type_template_id_0a4709b8___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3695),_Chat_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3211);for(var __WEBPACK_IMPORT_KEY__ in _Chat_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _Chat_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__[key]}))}(__WEBPACK_IMPORT_KEY__);var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(11);const __vuedocgen_export_0=Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__.a)(_Chat_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__.default,_Chat_vue_vue_type_template_id_0a4709b8___WEBPACK_IMPORTED_MODULE_0__.a,_Chat_vue_vue_type_template_id_0a4709b8___WEBPACK_IMPORTED_MODULE_0__.b,!1,null,null,null).exports;__webpack_exports__.default=__vuedocgen_export_0,__vuedocgen_export_0.__docgenInfo={exportName:"default",displayName:"Chat",description:"",tags:{},props:[{name:"chatId",type:{name:"ChatId"},required:!0},{name:"canClickOnChatTitle",type:{name:"boolean"}}],events:[{name:"submit",type:{names:["undefined"]}}]}},1910:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _ChatMemberLabel_vue_vue_type_template_id_5b6d4e42___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3506),_ChatMemberLabel_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2869);for(var __WEBPACK_IMPORT_KEY__ in _ChatMemberLabel_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _ChatMemberLabel_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__[key]}))}(__WEBPACK_IMPORT_KEY__);var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(11);const __vuedocgen_export_0=Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__.a)(_ChatMemberLabel_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__.default,_ChatMemberLabel_vue_vue_type_template_id_5b6d4e42___WEBPACK_IMPORTED_MODULE_0__.a,_ChatMemberLabel_vue_vue_type_template_id_5b6d4e42___WEBPACK_IMPORTED_MODULE_0__.b,!1,null,null,null).exports;__webpack_exports__.default=__vuedocgen_export_0,__vuedocgen_export_0.__docgenInfo={exportName:"default",displayName:"ChatMemberLabel",description:"",tags:{},props:[{name:"userId",type:{name:"string"},required:!0}]}},1911:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _GroupedMessageBubble_vue_vue_type_template_id_afdd847a___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3507),_GroupedMessageBubble_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2871);for(var __WEBPACK_IMPORT_KEY__ in _GroupedMessageBubble_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _GroupedMessageBubble_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__[key]}))}(__WEBPACK_IMPORT_KEY__);var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(11);const __vuedocgen_export_0=Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__.a)(_GroupedMessageBubble_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__.default,_GroupedMessageBubble_vue_vue_type_template_id_afdd847a___WEBPACK_IMPORTED_MODULE_0__.a,_GroupedMessageBubble_vue_vue_type_template_id_afdd847a___WEBPACK_IMPORTED_MODULE_0__.b,!1,null,null,null).exports;__webpack_exports__.default=__vuedocgen_export_0,__vuedocgen_export_0.__docgenInfo={exportName:"default",displayName:"GroupedMessageBubble",description:"",tags:{},props:[{name:"group",type:{name:"MessagesGroup"},required:!0}]}},2361:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ChatHead_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2362),_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ChatHead_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ChatHead_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__);for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ChatHead_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ChatHead_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__[key]}))}(__WEBPACK_IMPORT_KEY__);__webpack_exports__.default=_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ChatHead_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default.a},2362:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var vue_1=__importDefault(__webpack_require__(7)),CThumbnailImage_vue_1=__importDefault(__webpack_require__(694));exports.default=vue_1.default.extend({components:{CThumbnailImage:CThumbnailImage_vue_1.default},props:{profile:{type:Object,required:!0}}})},2599:function(module,exports,__webpack_require__){var isObject=__webpack_require__(161),now=__webpack_require__(2607),toNumber=__webpack_require__(1044),nativeMax=Math.max,nativeMin=Math.min;module.exports=function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError("Expected a function");function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args)}function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime;return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&time-lastInvokeTime>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,function remainingWait(time){var timeWaiting=wait-(time-lastCallTime);return maxing?nativeMin(timeWaiting,maxWait-(time-lastInvokeTime)):timeWaiting}(time))}function trailingEdge(time){return timerId=void 0,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(void 0===timerId)return leadingEdge(lastCallTime);if(maxing)return clearTimeout(timerId),timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return void 0===timerId&&(timerId=setTimeout(timerExpired,wait)),result}return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxWait=(maxing="maxWait"in options)?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function cancel(){void 0!==timerId&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0},debounced.flush=function flush(){return void 0===timerId?result:trailingEdge(now())},debounced}},2607:function(module,exports,__webpack_require__){var root=__webpack_require__(149);module.exports=function(){return root.Date.now()}},2775:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return render})),__webpack_require__.d(__webpack_exports__,"b",(function(){return staticRenderFns}));var render=function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("div",{staticClass:"flex-none w-12 h-12 mb-px bg-gray-300 rounded-full",attrs:{"data-user-id":this.profile.id}},[_c("CThumbnailImage",{attrs:{alt:this._f("fullname")(this.profile),src:this.profile.profileImg,title:this._f("fullname")(this.profile),type:"profile"}})],1)},staticRenderFns=[]},2869:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ChatMemberLabel_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2870),_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ChatMemberLabel_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ChatMemberLabel_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__);for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ChatMemberLabel_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ChatMemberLabel_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__[key]}))}(__WEBPACK_IMPORT_KEY__);__webpack_exports__.default=_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ChatMemberLabel_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default.a},2870:function(module,exports,__webpack_require__){"use strict";var _asyncToGenerator=__webpack_require__(55);__webpack_require__(39);var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var vue_1=__importDefault(__webpack_require__(7)),utils_1=__webpack_require__(105),ChatHead_vue_1=__importDefault(__webpack_require__(1753)),UserService_1=__webpack_require__(255);exports.default=vue_1.default.extend({components:{ChatHead:ChatHead_vue_1.default},props:{userId:{type:String,required:!0}},computed:{userProfilePromise:function userProfilePromise(){return(0,UserService_1.loadUserProfile)(this.userId)}},asyncComputed:{userProfile:function userProfile(){var _this=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.userProfilePromise;case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}),_callee)})))()},memberName:function memberName(){var _this2=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.t0=utils_1.getFullName,_context2.next=3,_this2.userProfilePromise;case 3:return _context2.t1=_context2.sent,_context2.abrupt("return",(0,_context2.t0)(_context2.t1));case 5:case"end":return _context2.stop()}}),_callee2)})))()}}})},2871:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_GroupedMessageBubble_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2872),_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_GroupedMessageBubble_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_GroupedMessageBubble_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__);for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_GroupedMessageBubble_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_GroupedMessageBubble_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__[key]}))}(__WEBPACK_IMPORT_KEY__);__webpack_exports__.default=_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_GroupedMessageBubble_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default.a},2872:function(module,exports,__webpack_require__){"use strict";__webpack_require__(10),__webpack_require__(4),__webpack_require__(13),__webpack_require__(5),__webpack_require__(16),__webpack_require__(14),__webpack_require__(17);var _defineProperty=__webpack_require__(77),_asyncToGenerator=__webpack_require__(55);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}__webpack_require__(39);var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var last_1=__importDefault(__webpack_require__(1051)),vue_1=__importDefault(__webpack_require__(7)),vuex_1=__webpack_require__(135),utils_1=__webpack_require__(105),ChatHead_vue_1=__importDefault(__webpack_require__(1753)),ChatServices_1=__webpack_require__(261),UserService_1=__webpack_require__(255),getter_types_1=__webpack_require__(122);exports.default=vue_1.default.extend({components:{ChatHead:ChatHead_vue_1.default},props:{group:{type:Object,required:!0}},data:function data(){return{profile:void 0,fullName:""}},fetch:function fetch(){var _this=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,UserService_1.loadUserProfile)(_this.group.userId);case 2:_this.profile=_context.sent,_this.fullName=(0,utils_1.getFullName)(_this.profile);case 4:case"end":return _context.stop()}}),_callee)})))()},computed:_objectSpread(_objectSpread({},(0,vuex_1.mapGetters)([getter_types_1.APPLICATION_USER_ID])),{},{isMe:function isMe(){return this.APPLICATION_USER_ID===this.group.userId},lastTimestamp:function lastTimestamp(){var _a;return null===(_a=(0,last_1.default)(this.group.messages))||void 0===_a?void 0:_a.createdAt},date:function date(){return(0,utils_1.formatTimeAgo)(this.lastTimestamp,"D. M. HH:mm",",")}}),methods:{formatMessageText:function formatMessageText(text){return(0,ChatServices_1.formatMessageText)(text)}}})},3211:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Chat_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3212),_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Chat_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Chat_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__);for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Chat_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Chat_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__[key]}))}(__WEBPACK_IMPORT_KEY__);__webpack_exports__.default=_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Chat_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default.a},3212:function(module,exports,__webpack_require__){"use strict";__webpack_require__(10),__webpack_require__(4),__webpack_require__(16),__webpack_require__(14),__webpack_require__(17);var _toConsumableArray=__webpack_require__(175),_asyncToGenerator=__webpack_require__(55),_defineProperty=__webpack_require__(77);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}__webpack_require__(39),__webpack_require__(13),__webpack_require__(5),__webpack_require__(57),__webpack_require__(28),__webpack_require__(23),__webpack_require__(24),__webpack_require__(20),__webpack_require__(136),__webpack_require__(137),__webpack_require__(42),__webpack_require__(44),__webpack_require__(30),__webpack_require__(53);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var Menu,debounce_1=__importDefault(__webpack_require__(2599)),first_1=__importDefault(__webpack_require__(3618)),last_1=__importDefault(__webpack_require__(1051)),vue_1=__importDefault(__webpack_require__(7)),vuex_1=__webpack_require__(135),Chat_1=__webpack_require__(264),utils_1=__webpack_require__(105),ChatMemberLabel_vue_1=__importDefault(__webpack_require__(1910)),GroupedMessageBubble_vue_1=__importDefault(__webpack_require__(1911)),CButton_vue_1=__importDefault(__webpack_require__(81)),CDropdown_vue_1=__importDefault(__webpack_require__(160)),CFormInput_vue_1=__importDefault(__webpack_require__(691)),CIcon_vue_1=__importDefault(__webpack_require__(78)),CSpinner_vue_1=__importDefault(__webpack_require__(521)),ChatService=__importStar(__webpack_require__(261)),UserService_1=__webpack_require__(255),getter_types_1=__webpack_require__(122),markChatAsSeenDebounced=(0,debounce_1.default)((function(chatId){return ChatService.markChatAsSeen(chatId)}),300);!function(Menu){Menu.SETTINGS="settings",Menu.MEMBERS="members",Menu.CHAT="chat"}(Menu||(Menu={})),exports.default=vue_1.default.extend({components:{ChatMemberLabel:ChatMemberLabel_vue_1.default,CIcon:CIcon_vue_1.default,CFormInput:CFormInput_vue_1.default,CSpinner:CSpinner_vue_1.default,GroupedMessageBubble:GroupedMessageBubble_vue_1.default,CDropdown:CDropdown_vue_1.default,CButton:CButton_vue_1.default},props:{chatId:{type:String,required:!0},canClickOnChatTitle:{type:Boolean}},data:function data(){return{chat:null,messages:[],isLoadingOlderMessages:!1,hasNoMoreOlderMessages:!1,isSubmitting:!1,text:"",unsubscribeFromNewMessages:void 0,option:Menu.CHAT}},computed:_objectSpread(_objectSpread({},(0,vuex_1.mapGetters)([getter_types_1.APPLICATION_USER_ID])),{},{groupedMessages:function groupedMessages(){return ChatService.groupMessagesByUser(this.messages)},viewElement:function viewElement(){return this.$refs.view},hasLoadOlderMessagesButtonVisible:function hasLoadOlderMessagesButtonVisible(){return!this.hasNoMoreOlderMessages&&this.messages.length>=ChatService.MESSAGES_PER_PAGE},otherMemberIds:function otherMemberIds(){var _this=this;return null!=this.chat?this.chat.memberIds.filter((function(id){return id!==_this.APPLICATION_USER_ID})):[]},dropdownMenuItems:function dropdownMenuItems(){return[{label:"Zoznam členov",icon:"members",onClick:this.showMembers}]}}),watch:{chatId:{immediate:!0,handler:function handler(){var _a;null===(_a=this.unsubscribeFromNewMessages)||void 0===_a||_a.call(this),this.initChat()}},"messages.0.id":{immediate:!0,handler:function handler(){markChatAsSeenDebounced(this.chatId)}}},beforeDestroy:function beforeDestroy(){var _a;null===(_a=this.unsubscribeFromNewMessages)||void 0===_a||_a.call(this)},asyncComputed:{memberNames:function memberNames(){var _this2=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Promise.all(_this2.otherMemberIds.map((function(id){return(0,UserService_1.loadUserProfile)(id)})));case 2:return _context.abrupt("return",_context.sent.map((function(profile){return(0,utils_1.getFullName)(profile)})).join(", "));case 3:case"end":return _context.stop()}}),_callee)})))()}},methods:{initChat:function initChat(){var _this3=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _this3.messages=[],_this3.option=Menu.CHAT,_this3.text="",_this3.hasNoMoreOlderMessages=!1,_context2.next=6,ChatService.getChat(_this3.chatId);case 6:return _this3.chat=_context2.sent,_context2.next=9,_this3.loadOlderMessages();case 9:return _this3.$nextTick((function(){_this3.scrollToNewMessages()})),_context2.next=12,_this3.subscribeToNewMessages();case 12:_this3.focusInput();case 13:case"end":return _context2.stop()}}),_callee2)})))()},subscribeToNewMessages:function subscribeToNewMessages(){var _this4=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var addNewMessages;return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return addNewMessages=function addNewMessages(messages){_this4.messages=[].concat(_toConsumableArray(messages),_toConsumableArray(_this4.messages)),_this4.$nextTick((function(){_this4.scrollToNewMessages()}))},_context3.next=3,ChatService.subscribeToNewMessages(_this4.chatId,addNewMessages,(0,first_1.default)(_this4.messages));case 3:_this4.unsubscribeFromNewMessages=_context3.sent;case 4:case"end":return _context3.stop()}}),_callee3)})))()},loadOlderMessages:function loadOlderMessages(){var _this5=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var messages,view,beforeScroll;return regeneratorRuntime.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _this5.isLoadingOlderMessages=!0,_context4.next=3,ChatService.loadMessages(_this5.chatId,(0,last_1.default)(_this5.messages));case 3:messages=_context4.sent,view=_this5.$refs.view,beforeScroll=view.scrollHeight-view.scrollTop,_this5.messages=[].concat(_toConsumableArray(_this5.messages),_toConsumableArray(messages)),messages.length<ChatService.MESSAGES_PER_PAGE&&(_this5.hasNoMoreOlderMessages=!0),_this5.$nextTick((function(){view.scrollTo(0,view.scrollHeight-beforeScroll)})),setTimeout((function(){_this5.isLoadingOlderMessages=!1}),250);case 10:case"end":return _context4.stop()}}),_callee4)})))()},handleEnter:function handleEnter(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),this.submitMessage())},submitMessage:function submitMessage(){var _this6=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee5(){return regeneratorRuntime.wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(_this6.text.trim()){_context5.next=3;break}return _context5.abrupt("return");case 3:return _this6.isSubmitting=!0,_context5.prev=4,_context5.next=7,ChatService.sendMessage(_this6.chatId,_this6.text);case 7:_this6.$emit("submit",!0),_this6.text="",_context5.next=14;break;case 11:_context5.prev=11,_context5.t0=_context5.catch(4),console.error("submitMessage",_context5.t0);case 14:return _context5.prev=14,_this6.isSubmitting=!1,_this6.$nextTick((function(){_this6.focusInput()})),_context5.finish(14);case 18:case"end":return _context5.stop()}}),_callee5,null,[[4,11,14,18]])})))()},archiveConversation:function archiveConversation(){},showMembers:function showMembers(){this.option=Menu.MEMBERS,this.$refs.dropdown.close()},notificationSettings:function notificationSettings(){},showChat:function showChat(){this.option=Menu.CHAT},leaveConversation:function leaveConversation(){},focusInput:function focusInput(){this.$refs.input.$refs.input.focus()},scrollToNewMessages:function scrollToNewMessages(){this.viewElement&&(this.viewElement.scrollTop=this.viewElement.scrollHeight)},isMentoringChat:function isMentoringChat(topic){return topic.includes(Chat_1.ChatTopicBase.mentoring)},getIdFromTopic:function getIdFromTopic(topic){return topic.split("-")[1]}}})},3506:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return render})),__webpack_require__.d(__webpack_exports__,"b",(function(){return staticRenderFns}));var render=function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("div",{staticClass:"sm:w-auto flex items-center w-full space-x-4 rounded-md cursor-pointer"},[_c("div",{staticClass:"flex-nowrap sm:flex-row relative flex flex-col"},[this.userProfile?_c("ChatHead",{staticClass:"relative",attrs:{profile:this.userProfile}}):this._e()],1),this._v(" "),_c("div",{staticClass:"flex flex-col overflow-hidden"},[_c("div",{staticClass:"font-semibold truncate"},[this._v(this._s(this.memberName))])])])},staticRenderFns=[]},3507:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return render})),__webpack_require__.d(__webpack_exports__,"b",(function(){return staticRenderFns}));var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"flex",class:_vm.isMe?"justify-end text-right":"justify-start text-left"},[_vm.profile&&!_vm.isMe?_c("ChatHead",{staticClass:"order-1 mr-3",attrs:{profile:_vm.profile}}):_vm._e(),_vm._v(" "),_c("div",{class:_vm.isMe?"order-1":"order-2"},[_c("div",{staticClass:"space-y-1"},_vm._l(_vm.group.messages,(function(message,index){return _c("div",{key:message.id,attrs:{"data-message-id":message.id,title:_vm._f("datetime")(message.createdAt)}},[_c("div",{staticClass:"inline-block py-3.5 px-4 rounded-md",class:_vm.isMe?"text-white bg-blue-1000":"bg-gray-100"},[0!==index||_vm.isMe?_vm._e():_c("div",{staticClass:"text-gray-710 text-xs mb-0.5"},[_vm._v("\n                        "+_vm._s(_vm.fullName)+"\n                    ")]),_vm._v(" "),_c("div",{domProps:{innerHTML:_vm._s(_vm.formatMessageText(message.text))}})])])})),0),_vm._v(" "),_c("div",{staticClass:"mt-2.5 leading-none text-gray-710 text-sm"},[_vm._v("\n            "+_vm._s(_vm.date)+"\n        ")])])],1)},staticRenderFns=[]},3618:function(module,exports,__webpack_require__){module.exports=__webpack_require__(3619)},3619:function(module,exports){module.exports=function head(array){return array&&array.length?array[0]:void 0}},3695:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return render})),__webpack_require__.d(__webpack_exports__,"b",(function(){return staticRenderFns}));var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"relative flex flex-col flex-auto h-full",attrs:{"data-chat-id":_vm.chatId}},[_vm.chat?_c("div",{staticClass:"head h-20 w-full pl-0 sm:pl-6 pr-1.5 sm:pr-2.5 border-b border-gray-150 bg-white flex flex-row justify-between items-center"},[_c("div",{staticClass:"block pl-1.5 sm:pl-0 sm:-ml-3",class:{"sm:hidden":"chat"===_vm.option}},["chat"===_vm.option?_c("CButton",{staticClass:"w-11 h-11",attrs:{icon:"arrow-back",to:{path:"/messages"},variant:"primary-link"}}):_c("CButton",{staticClass:"w-11 h-11",attrs:{icon:"close",variant:"primary-link"},on:{click:function($event){return _vm.showChat()}}})],1),_vm._v(" "),null!=_vm.chat?_c("div",[_vm.canClickOnChatTitle&&_vm.isMentoringChat(_vm.chat.topic)?_c("nuxt-link",{staticClass:"hover:underline",attrs:{target:"_blank",to:{name:"profile-activity-mentoring-id",params:{id:_vm.getIdFromTopic(_vm.chat.topic)}}}},[_vm._v(_vm._s(_vm.memberNames+" (mentoring)"))]):_c("p",{staticClass:"m-0 font-normal text-black"},[_vm._v("\n                "+_vm._s(_vm.isMentoringChat(_vm.chat.topic)?_vm.memberNames+" (mentoring)":_vm.chat.title)+"\n            ")])],1):_vm._e(),_vm._v(" "),_c("div",[_c("CDropdown",{ref:"dropdown",attrs:{"padding-none":"",placement:"right"},scopedSlots:_vm._u([{key:"trigger",fn:function(ref){var isOpen=ref.isOpen;return[_c("CButton",{staticClass:"w-11 h-11 rotate-90",class:{"bg-primary-50":isOpen},attrs:{icon:"more",variant:"primary-link"}})]}},{key:"content",fn:function(){return[_c("ul",{staticClass:"list py-2"},_vm._l(_vm.dropdownMenuItems,(function(item,index){return _c("li",{key:index,staticClass:"whitespace-nowrap hover:underline hover:text-primary-880 flex px-5 py-2 cursor-pointer",on:{click:function($event){return item.onClick()}}},[_c("CIcon",{staticClass:"mr-3",attrs:{name:item.icon}}),_vm._v("\n                            "+_vm._s(item.label)+"\n                        ")],1)})),0)]},proxy:!0}],null,!1,2908067958)})],1)]):_vm._e(),_vm._v(" "),_c("div",{staticClass:"flex flex-col h-full overflow-auto"},["chat"===_vm.option?[_c("div",{ref:"view",staticClass:"fancy-scrollbar flex flex-col flex-auto h-full mb-4 overflow-y-auto"},[_c("div",{staticClass:"sm:p-6 flex flex-col justify-end flex-auto p-4"},[_vm.hasLoadOlderMessagesButtonVisible?_c("CButton",{staticClass:"min-h-16 flex items-center justify-center py-4 mb-4",attrs:{variant:"link"},on:{click:function($event){return $event.preventDefault(),_vm.loadOlderMessages()}}},[_vm.isLoadingOlderMessages?_c("CSpinner",{staticClass:"isLoadingOlderMessages",attrs:{size:"large"}}):_vm._e(),_vm._v(" "),_vm.isLoadingOlderMessages?_vm._e():_c("span",[_vm._v("\n                            Zobraziť staršie správy\n                        ")])],1):_vm._e(),_vm._v(" "),_c("div",{staticClass:"space-y-5"},_vm._l(_vm.groupedMessages,(function(group){return _c("GroupedMessageBubble",{key:group.id,attrs:{group:group}})})),1)],1)]),_vm._v(" "),_c("div",{staticClass:"sm:px-6 sm:pb-6 flex flex-row px-4 pb-3"},[_c("CFormInput",{ref:"input",staticClass:"bg-gray-300",attrs:{disabled:_vm.isSubmitting,placeholder:"Napísať správu"},nativeOn:{keydown:function($event){return _vm.handleEnter.apply(null,arguments)}},model:{value:_vm.text,callback:function($$v){_vm.text=$$v},expression:"text"}}),_vm._v(" "),_c("button",{staticClass:"ml-2.5 outline-none",attrs:{disabled:_vm.isSubmitting},on:{click:_vm.submitMessage}},[_c("CIcon",{staticClass:"text-primary-880 hover:text-primary-500",attrs:{name:"send",size:44}})],1)],1)]:_vm._e(),_vm._v(" "),"members"===_vm.option?[_c("div",{staticClass:"p-4"},_vm._l(_vm.chat.memberIds,(function(user,idx){return _c("ChatMemberLabel",{key:idx,class:{"mt-2":0!==idx},attrs:{"user-id":user}})})),1)]:_vm._e(),_vm._v(" "),"settings"===_vm.option?[_c("div",{staticClass:"p-4"},[_vm._v("SETTINGS")])]:_vm._e()],2)])},staticRenderFns=[]}}]);
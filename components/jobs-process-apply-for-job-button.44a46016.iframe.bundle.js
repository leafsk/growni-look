(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{1914:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _ApplyForJobButton_vue_vue_type_template_id_28699e66___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2783),_ApplyForJobButton_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2416);for(var __WEBPACK_IMPORT_KEY__ in _ApplyForJobButton_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _ApplyForJobButton_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__[key]}))}(__WEBPACK_IMPORT_KEY__);var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8);const __vuedocgen_export_0=Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__.a)(_ApplyForJobButton_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__.default,_ApplyForJobButton_vue_vue_type_template_id_28699e66___WEBPACK_IMPORTED_MODULE_0__.a,_ApplyForJobButton_vue_vue_type_template_id_28699e66___WEBPACK_IMPORTED_MODULE_0__.b,!1,null,null,null).exports;__webpack_exports__.default=__vuedocgen_export_0,__vuedocgen_export_0.__docgenInfo={exportName:"default",displayName:"ApplyForJobButton",description:"",tags:{},props:[{name:"job",type:{name:"Job"},required:!0},{name:"org",type:{name:"Org"},required:!0},{name:"jobOwner",type:{name:"boolean"}},{name:"preview",type:{name:"boolean"}}]}},2268:function(module,exports,__webpack_require__){"use strict";var _asyncToGenerator=__webpack_require__(59);__webpack_require__(46),Object.defineProperty(exports,"__esModule",{value:!0}),exports.adjustTitleByStatus=exports.revertRejectedJobRequest=exports.rejectJobRequest=exports.acceptJobRequest=exports.listJobRequestsForApplicant=exports.listJobRequests=exports.getJobRequestRefs=exports.getUsersActiveJobRequests=exports.loadJobRequest=void 0;var firestore_1=__webpack_require__(120),JobRequest_1=__webpack_require__(2248),utils_1=__webpack_require__(103),firebase_1=__webpack_require__(82),API_1=__webpack_require__(155);function _loadJobRequest(){return(_loadJobRequest=_asyncToGenerator(regeneratorRuntime.mark((function _callee(id){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,firebase_1.loadDocumentOrFail)(firebase_1.collections.jobRequests,id);case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}function _getUsersActiveJobRequests(){return(_getUsersActiveJobRequests=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(jobId){var _a;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,(0,firebase_1.listDocuments)((0,firestore_1.query)(firebase_1.collections.jobRequests,(0,firestore_1.where)("applicantId","==",(null===(_a=firebase_1.auth.currentUser)||void 0===_a?void 0:_a.uid)||null),(0,firestore_1.where)("jobId","==",jobId),(0,firestore_1.where)("status","==",JobRequest_1.JobRequestStatus.APPLIED)));case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}),_callee2)})))).apply(this,arguments)}function getJobRequestRefs(jobId,orgId){return(0,firestore_1.query)(firebase_1.collections.jobRequests,(0,firestore_1.where)("jobId","==",jobId),(0,firestore_1.where)("orgId","==",orgId))}function _listJobRequests(){return(_listJobRequests=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(jobId,orgId){var jobRequests;return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,(0,firebase_1.listDocuments)(getJobRequestRefs(jobId,orgId));case 2:return jobRequests=_context3.sent,_context3.abrupt("return",(0,utils_1.orderByDate)(jobRequests));case 4:case"end":return _context3.stop()}}),_callee3)})))).apply(this,arguments)}function _listJobRequestsForApplicant(){return(_listJobRequestsForApplicant=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(applicantId){var jobRequests;return regeneratorRuntime.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,(0,firebase_1.listDocuments)((0,firestore_1.query)(firebase_1.collections.jobRequests,(0,firestore_1.where)("applicantId","==",applicantId)));case 2:return jobRequests=_context4.sent,_context4.abrupt("return",(0,utils_1.orderByDate)(jobRequests));case 4:case"end":return _context4.stop()}}),_callee4)})))).apply(this,arguments)}function _acceptJobRequest(){return(_acceptJobRequest=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(id,offer,unpublishing){return regeneratorRuntime.wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,API_1.API.post("job-requests/".concat(id,"/accept"),{offer:offer,unpublishing:unpublishing});case 2:case"end":return _context5.stop()}}),_callee5)})))).apply(this,arguments)}function _rejectJobRequest(){return(_rejectJobRequest=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(id,withEmail,message){return regeneratorRuntime.wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,API_1.API.post("job-requests/".concat(id,"/reject"),{withEmail:withEmail,message:message});case 2:case"end":return _context6.stop()}}),_callee6)})))).apply(this,arguments)}function _revertRejectedJobRequest(){return(_revertRejectedJobRequest=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(id){return regeneratorRuntime.wrap((function _callee7$(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,API_1.API.post("job-requests/".concat(id,"/revertRejected"));case 2:case"end":return _context7.stop()}}),_callee7)})))).apply(this,arguments)}exports.loadJobRequest=function loadJobRequest(_x){return _loadJobRequest.apply(this,arguments)},exports.getUsersActiveJobRequests=function getUsersActiveJobRequests(_x2){return _getUsersActiveJobRequests.apply(this,arguments)},exports.getJobRequestRefs=getJobRequestRefs,exports.listJobRequests=function listJobRequests(_x3,_x4){return _listJobRequests.apply(this,arguments)},exports.listJobRequestsForApplicant=function listJobRequestsForApplicant(_x5){return _listJobRequestsForApplicant.apply(this,arguments)},exports.acceptJobRequest=function acceptJobRequest(_x6,_x7,_x8){return _acceptJobRequest.apply(this,arguments)},exports.rejectJobRequest=function rejectJobRequest(_x9,_x10,_x11){return _rejectJobRequest.apply(this,arguments)},exports.revertRejectedJobRequest=function revertRejectedJobRequest(_x12){return _revertRejectedJobRequest.apply(this,arguments)},exports.adjustTitleByStatus=function adjustTitleByStatus(request,title){switch(request.status){case JobRequest_1.JobRequestStatus.ACCEPTED:return{title:title,before:"Pracujem pre",after:"na pozícii"};case JobRequest_1.JobRequestStatus.APPLIED:return{title:title,before:"Chcem pracovať pre",after:"na pozícii"};default:return{title:title,before:"Práca",after:"v organizácii"}}}},2416:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ApplyForJobButton_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2417),_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ApplyForJobButton_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ApplyForJobButton_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__);for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ApplyForJobButton_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ApplyForJobButton_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__[key]}))}(__WEBPACK_IMPORT_KEY__);__webpack_exports__.default=_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ApplyForJobButton_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default.a},2417:function(module,exports,__webpack_require__){"use strict";var _asyncToGenerator=__webpack_require__(59);__webpack_require__(46);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var cloneDeep_1=__importDefault(__webpack_require__(328)),vue_1=__importDefault(__webpack_require__(7)),RegistrationNotCompletedModal_vue_1=__importDefault(__webpack_require__(621)),SendJobRequestModal_vue_1=__importDefault(__webpack_require__(1930)),CButton_vue_1=__importDefault(__webpack_require__(55)),firebase_1=__webpack_require__(82),JobRequestsService=__importStar(__webpack_require__(2268)),getter_types_1=__webpack_require__(128);exports.default=vue_1.default.extend({components:{CButton:CButton_vue_1.default},props:{job:{type:Object,required:!0},org:{type:Object,required:!0},jobOwner:{type:Boolean},preview:{type:Boolean}},data:function data(){return{activeJobRequests:[],userProfile:{}}},fetch:function fetch(){var _this=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!_this.job.id){_context.next=4;break}return _context.next=3,JobRequestsService.getUsersActiveJobRequests(_this.job.id);case 3:_this.activeJobRequests=_context.sent;case 4:_this.userProfile=(0,cloneDeep_1.default)(_this.$store.getters[getter_types_1.APPLICATION_USER_PROFILE]||{});case 5:case"end":return _context.stop()}}),_callee)})))()},computed:{hasAlreadyApplied:function hasAlreadyApplied(){return this.activeJobRequests.length>0},userPrivateProfile:function userPrivateProfile(){return this.$store.getters[getter_types_1.APPLICATION_USER_PRIVATE_PROFILE]}},methods:{openJobRequestModal:function openJobRequestModal(){var _this2=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _a,_b,_c,jobRequest;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(_this2.$ga.event({eventCategory:"job",eventAction:"openApplicationModal"}),_this2.$exponea.track("cta1_zaujem_o_job",{job_name:_this2.job.title,job_organisation:_this2.org.title,job_location:_this2.job.location,job_location_remote:_this2.job.remote,job_type:_this2.job.type,job_salary_low:_this2.job.salaryMin,job_salary_high:_this2.job.salaryMax,job_salary_unit:_this2.job.salaryUnit,job_audience:_this2.job.who}),!(null===(_a=firebase_1.auth.currentUser)||void 0===_a?void 0:_a.uid)||(null===(_b=firebase_1.auth.currentUser)||void 0===_b?void 0:_b.emailVerified)&&(null===(_c=_this2.userPrivateProfile)||void 0===_c?void 0:_c.rulesAccepted)){_context2.next=4;break}return _context2.abrupt("return",_this2.$modal(RegistrationNotCompletedModal_vue_1.default));case 4:return _context2.next=6,_this2.$modal(SendJobRequestModal_vue_1.default,{job:_this2.job});case 6:(jobRequest=_context2.sent)&&_this2.activeJobRequests.push(jobRequest);case 8:case"end":return _context2.stop()}}),_callee2)})))()}}})},2783:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return render})),__webpack_require__.d(__webpack_exports__,"b",(function(){return staticRenderFns}));var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"ApplyForJobButton"},[_c("client-only",[_vm.preview?_c("CButton",{attrs:{full:"",size:"large",variant:"success"}},[_vm._v("\n            "+_vm._s(_vm.$t("jobView.jobApplyButton.interested",_vm.job.lang||"sk"))+"\n        ")]):[_vm.jobOwner?_c("CButton",{attrs:{full:"",icon:"edit",size:"large",to:{name:"profile-jobs-edit-id",params:{id:_vm.job.id}},variant:"primary-150"}},[_vm._v("\n                "+_vm._s(_vm.$t("jobView.jobApplyButton.edit",_vm.job.lang||"sk"))+"\n            ")]):_vm.hasAlreadyApplied?_c("CButton",{attrs:{disabled:"",full:"",size:"large"}},[_vm._v("\n                "+_vm._s(_vm.$t("jobView.jobApplyButton.waiting",_vm.job.lang||"sk"))+"\n            ")]):_c("CButton",{attrs:{full:"",size:"large",variant:"success"},on:{click:_vm.openJobRequestModal}},[_vm._v("\n                "+_vm._s(_vm.$t("jobView.jobApplyButton.interested",_vm.job.lang||"sk"))+"\n            ")])]],2)],1)},staticRenderFns=[]}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[136,129,134],{1999:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _JobModalCandidatesList_vue_vue_type_template_id_7969895f___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3123),_JobModalCandidatesList_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2699);for(var __WEBPACK_IMPORT_KEY__ in _JobModalCandidatesList_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _JobModalCandidatesList_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__[key]}))}(__WEBPACK_IMPORT_KEY__);var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8);const __vuedocgen_export_0=Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__.a)(_JobModalCandidatesList_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__.default,_JobModalCandidatesList_vue_vue_type_template_id_7969895f___WEBPACK_IMPORTED_MODULE_0__.a,_JobModalCandidatesList_vue_vue_type_template_id_7969895f___WEBPACK_IMPORTED_MODULE_0__.b,!1,null,null,null).exports;__webpack_exports__.default=__vuedocgen_export_0,__vuedocgen_export_0.__docgenInfo={exportName:"default",displayName:"JobModalCandidatesList",description:"",tags:{},props:[{name:"value",type:{name:"JobCandidate[]"},required:!0},{name:"job",type:{name:"Job"},required:!0},{name:"candidates",type:{name:"JobCandidate[]"},required:!0},{name:"withSalary",type:{name:"boolean"}}],events:[{name:"input",type:{names:["undefined"]}}]}},2093:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _UnpublishJobModal_vue_vue_type_template_id_13d5e846___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3550),_UnpublishJobModal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2921);for(var __WEBPACK_IMPORT_KEY__ in _UnpublishJobModal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _UnpublishJobModal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__[key]}))}(__WEBPACK_IMPORT_KEY__);var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8);const __vuedocgen_export_0=Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__.a)(_UnpublishJobModal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__.default,_UnpublishJobModal_vue_vue_type_template_id_13d5e846___WEBPACK_IMPORTED_MODULE_0__.a,_UnpublishJobModal_vue_vue_type_template_id_13d5e846___WEBPACK_IMPORTED_MODULE_0__.b,!1,null,null,null).exports;__webpack_exports__.default=__vuedocgen_export_0,__vuedocgen_export_0.__docgenInfo={exportName:"default",displayName:"UnpublishJobModal",description:"",tags:{},props:[{name:"org",type:{name:"Org"},required:!0},{name:"job",type:{name:"Job"},required:!0}],events:[{name:"close",type:{names:["undefined"]}}]}},2248:function(module,exports,__webpack_require__){"use strict";var _exports$notFoundEmpR,JobRequestStatus,NotFoundEmpReason,_defineProperty=__webpack_require__(71);__webpack_require__(27),__webpack_require__(169),Object.defineProperty(exports,"__esModule",{value:!0}),exports.notFoundEmployeeOptions=exports.notFoundEmpReasonDict=exports.NotFoundEmpReason=exports.findEmployeeOptions=exports.DefaultJobRequest=exports.JobRequestStatus=void 0,function(JobRequestStatus){JobRequestStatus.APPLIED="applied",JobRequestStatus.ACCEPTED="accepted",JobRequestStatus.REJECTED="rejected"}(JobRequestStatus=exports.JobRequestStatus||(exports.JobRequestStatus={})),exports.DefaultJobRequest={email:"",phone:"",motivation:"",about:"",linkedInUrl:"",acceptTerms:!1,status:JobRequestStatus.APPLIED,jobMediationAgreementAccepted:!1},exports.findEmployeeOptions=[{id:"success",value:"success",label:"ÁNO"},{id:"noSuccess",value:"noSuccess",label:"NIE"},{id:"notDecided",value:"notDecided",label:"ešte sme výberový proces neuzavreli"}],function(NotFoundEmpReason){NotFoundEmpReason.extern="extern",NotFoundEmpReason.anotherPortal="another-portal",NotFoundEmpReason.linkedin="linkedin",NotFoundEmpReason.none="none",NotFoundEmpReason.other="other"}(NotFoundEmpReason=exports.NotFoundEmpReason||(exports.NotFoundEmpReason={})),exports.notFoundEmpReasonDict=(_defineProperty(_exports$notFoundEmpR={},NotFoundEmpReason.extern,"Vybrali sme iného uchádzača: interne / vďaka headhunterovi"),_defineProperty(_exports$notFoundEmpR,NotFoundEmpReason.anotherPortal,"Vybrali sme iného uchádzača cez iný pracovný portál"),_defineProperty(_exports$notFoundEmpR,NotFoundEmpReason.linkedin,"Vybrali sme iného uchádzača cez Linkedin"),_defineProperty(_exports$notFoundEmpR,NotFoundEmpReason.none,"Nevybrali sme žiadneho uchádzača"),_defineProperty(_exports$notFoundEmpR,NotFoundEmpReason.other,"Iný dôvod:"),_exports$notFoundEmpR),exports.notFoundEmployeeOptions=Object.values(NotFoundEmpReason).map((function(id){return{id:id,value:id,label:exports.notFoundEmpReasonDict[id]}}))},2268:function(module,exports,__webpack_require__){"use strict";var _asyncToGenerator=__webpack_require__(58);__webpack_require__(46),Object.defineProperty(exports,"__esModule",{value:!0}),exports.adjustTitleByStatus=exports.revertRejectedJobRequest=exports.rejectJobRequest=exports.acceptJobRequest=exports.listJobRequestsForApplicant=exports.listJobRequests=exports.getJobRequestRefs=exports.getUsersActiveJobRequests=exports.loadJobRequest=void 0;var firestore_1=__webpack_require__(120),JobRequest_1=__webpack_require__(2248),utils_1=__webpack_require__(103),firebase_1=__webpack_require__(82),API_1=__webpack_require__(155);function _loadJobRequest(){return(_loadJobRequest=_asyncToGenerator(regeneratorRuntime.mark((function _callee(id){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,firebase_1.loadDocumentOrFail)(firebase_1.collections.jobRequests,id);case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}function _getUsersActiveJobRequests(){return(_getUsersActiveJobRequests=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(jobId){var _a;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,(0,firebase_1.listDocuments)((0,firestore_1.query)(firebase_1.collections.jobRequests,(0,firestore_1.where)("applicantId","==",(null===(_a=firebase_1.auth.currentUser)||void 0===_a?void 0:_a.uid)||null),(0,firestore_1.where)("jobId","==",jobId),(0,firestore_1.where)("status","==",JobRequest_1.JobRequestStatus.APPLIED)));case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}),_callee2)})))).apply(this,arguments)}function getJobRequestRefs(jobId,orgId){return(0,firestore_1.query)(firebase_1.collections.jobRequests,(0,firestore_1.where)("jobId","==",jobId),(0,firestore_1.where)("orgId","==",orgId))}function _listJobRequests(){return(_listJobRequests=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(jobId,orgId){var jobRequests;return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,(0,firebase_1.listDocuments)(getJobRequestRefs(jobId,orgId));case 2:return jobRequests=_context3.sent,_context3.abrupt("return",(0,utils_1.orderByDate)(jobRequests));case 4:case"end":return _context3.stop()}}),_callee3)})))).apply(this,arguments)}function _listJobRequestsForApplicant(){return(_listJobRequestsForApplicant=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(applicantId){var jobRequests;return regeneratorRuntime.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,(0,firebase_1.listDocuments)((0,firestore_1.query)(firebase_1.collections.jobRequests,(0,firestore_1.where)("applicantId","==",applicantId)));case 2:return jobRequests=_context4.sent,_context4.abrupt("return",(0,utils_1.orderByDate)(jobRequests));case 4:case"end":return _context4.stop()}}),_callee4)})))).apply(this,arguments)}function _acceptJobRequest(){return(_acceptJobRequest=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(id,offer,unpublishing){return regeneratorRuntime.wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,API_1.API.post("job-requests/".concat(id,"/accept"),{offer:offer,unpublishing:unpublishing});case 2:case"end":return _context5.stop()}}),_callee5)})))).apply(this,arguments)}function _rejectJobRequest(){return(_rejectJobRequest=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(id,withEmail,message){return regeneratorRuntime.wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,API_1.API.post("job-requests/".concat(id,"/reject"),{withEmail:withEmail,message:message});case 2:case"end":return _context6.stop()}}),_callee6)})))).apply(this,arguments)}function _revertRejectedJobRequest(){return(_revertRejectedJobRequest=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(id){return regeneratorRuntime.wrap((function _callee7$(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,API_1.API.post("job-requests/".concat(id,"/revertRejected"));case 2:case"end":return _context7.stop()}}),_callee7)})))).apply(this,arguments)}exports.loadJobRequest=function loadJobRequest(_x){return _loadJobRequest.apply(this,arguments)},exports.getUsersActiveJobRequests=function getUsersActiveJobRequests(_x2){return _getUsersActiveJobRequests.apply(this,arguments)},exports.getJobRequestRefs=getJobRequestRefs,exports.listJobRequests=function listJobRequests(_x3,_x4){return _listJobRequests.apply(this,arguments)},exports.listJobRequestsForApplicant=function listJobRequestsForApplicant(_x5){return _listJobRequestsForApplicant.apply(this,arguments)},exports.acceptJobRequest=function acceptJobRequest(_x6,_x7,_x8){return _acceptJobRequest.apply(this,arguments)},exports.rejectJobRequest=function rejectJobRequest(_x9,_x10,_x11){return _rejectJobRequest.apply(this,arguments)},exports.revertRejectedJobRequest=function revertRejectedJobRequest(_x12){return _revertRejectedJobRequest.apply(this,arguments)},exports.adjustTitleByStatus=function adjustTitleByStatus(request,title){switch(request.status){case JobRequest_1.JobRequestStatus.ACCEPTED:return{title:title,before:"Pracujem pre",after:"na pozícii"};case JobRequest_1.JobRequestStatus.APPLIED:return{title:title,before:"Chcem pracovať pre",after:"na pozícii"};default:return{title:title,before:"Práca",after:"v organizácii"}}}},2699:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_JobModalCandidatesList_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2700),_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_JobModalCandidatesList_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_JobModalCandidatesList_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__);for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_JobModalCandidatesList_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_JobModalCandidatesList_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__[key]}))}(__WEBPACK_IMPORT_KEY__);__webpack_exports__.default=_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_JobModalCandidatesList_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default.a},2700:function(module,exports,__webpack_require__){"use strict";__webpack_require__(6),__webpack_require__(4),__webpack_require__(12),__webpack_require__(10),__webpack_require__(13);var _asyncToGenerator=__webpack_require__(58),_defineProperty=__webpack_require__(71),_toConsumableArray=__webpack_require__(170);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}__webpack_require__(46),__webpack_require__(21),__webpack_require__(9),__webpack_require__(5),__webpack_require__(27),__webpack_require__(25),__webpack_require__(26),__webpack_require__(49),__webpack_require__(52);var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var vue_1=__importDefault(__webpack_require__(7)),JobModalCandidate_vue_1=__importDefault(__webpack_require__(1978)),CFormAutocomplete_vue_1=__importDefault(__webpack_require__(237)),CFormGroup_vue_1=__importDefault(__webpack_require__(199));exports.default=vue_1.default.extend({components:{CFormGroup:CFormGroup_vue_1.default,CFormAutocomplete:CFormAutocomplete_vue_1.default,JobModalCandidate:JobModalCandidate_vue_1.default},props:{value:{type:Array,required:!0},job:{type:Object,required:!0},candidates:{type:Array,required:!0},withSalary:Boolean},data:function data(){return{chosenOpts:[]}},computed:{candidateForm:function candidateForm(){return this.$refs.candidate}},methods:{addChosenCandidate:function addChosenCandidate(candidate){var value=[].concat(_toConsumableArray(this.value),[_objectSpread({},candidate)]);this.$emit("input",value)},removeChosenCandidate:function removeChosenCandidate(candidate){var value=this.value.filter((function(_ref){return _ref.requestId!==candidate.requestId}));this.$emit("input",value)},updateChosenCandidate:function updateChosenCandidate(requestId,updatedCandidate){var value=this.value.map((function(candidate){return candidate.requestId===requestId?updatedCandidate:candidate}));this.$emit("input",value)},validateCandidates:function validateCandidates(){var _this=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var validCandidates;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,Promise.all(_this.candidateForm.map(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(candidate){var _yield$candidate$vali,isValid;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,candidate.validate();case 2:return _yield$candidate$vali=_context.sent,isValid=_yield$candidate$vali.isValid,_context.abrupt("return",isValid);case 5:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}()));case 2:return validCandidates=_context2.sent,_context2.abrupt("return",!validCandidates.includes(!1));case 4:case"end":return _context2.stop()}}),_callee2)})))()}}})},2921:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_UnpublishJobModal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2922),_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_UnpublishJobModal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_UnpublishJobModal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__);for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_UnpublishJobModal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_UnpublishJobModal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__[key]}))}(__WEBPACK_IMPORT_KEY__);__webpack_exports__.default=_node_modules_vue_docgen_loader_lib_index_js_ref_9_node_modules_storybook_vue_node_modules_ts_loader_index_js_ref_3_0_node_modules_babel_loader_lib_index_js_ref_22_0_node_modules_ts_loader_index_js_ref_22_1_node_modules_nuxt_components_dist_loader_js_ref_10_0_node_modules_vue_loader_lib_index_js_vue_loader_options_UnpublishJobModal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default.a},2922:function(module,exports,__webpack_require__){"use strict";__webpack_require__(6),__webpack_require__(4),__webpack_require__(12),__webpack_require__(13);var _defineProperty=__webpack_require__(71),_asyncToGenerator=__webpack_require__(58);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}__webpack_require__(46),__webpack_require__(9),__webpack_require__(5),__webpack_require__(25),__webpack_require__(26),__webpack_require__(27),__webpack_require__(10);var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var vue_1=__importDefault(__webpack_require__(7)),Job_1=__webpack_require__(3),JobRequest_1=__webpack_require__(2248),utils_1=__webpack_require__(103),JobModalCandidatesList_vue_1=__importDefault(__webpack_require__(1999)),CButton_vue_1=__importDefault(__webpack_require__(62)),CFormDateInput_vue_1=__importDefault(__webpack_require__(338)),CFormGroup_vue_1=__importDefault(__webpack_require__(199)),CFormInput_vue_1=__importDefault(__webpack_require__(154)),CFormRadio_vue_1=__importDefault(__webpack_require__(326)),JobRequestsService_1=__webpack_require__(2268),JobsService_1=__webpack_require__(1145),UserService_1=__webpack_require__(273),job_1=__webpack_require__(2620);exports.default=vue_1.default.extend({components:{CButton:CButton_vue_1.default,CFormGroup:CFormGroup_vue_1.default,CFormInput:CFormInput_vue_1.default,CFormRadio:CFormRadio_vue_1.default,CFormDateInput:CFormDateInput_vue_1.default,JobModalCandidatesList:JobModalCandidatesList_vue_1.default},props:{org:{type:Object,required:!0},job:{type:Object,required:!0}},data:function data(){return{foundEmployee:Job_1.EndedHow.success,chosenEndDate:void 0,candidates:[],chosenCandidates:[],notFoundEmployeeOptions:JobRequest_1.notFoundEmployeeOptions,notFoundEmployeeReason:"",notFoundEmployeeOtherReason:"",findEmployeeOptions:JobRequest_1.findEmployeeOptions,errors:{}}},computed:{candidatesListRef:function candidatesListRef(){return this.$refs.candidatesList},withSalary:function withSalary(){return(0,JobsService_1.isJobTypePaidService)(this.org,this.job)},resolvedNotFoundEmployeeReason:function resolvedNotFoundEmployeeReason(){return"other"===this.notFoundEmployeeReason?this.notFoundEmployeeOtherReason:this.notFoundEmployeeReason},canSubmit:function canSubmit(){return this.foundEmployee===Job_1.EndedHow.success?this.chosenCandidates.length>0:this.foundEmployee===Job_1.EndedHow.noSuccess?this.resolvedNotFoundEmployeeReason.length>0:this.foundEmployee===Job_1.EndedHow.notDecided&&Boolean(this.chosenEndDate)}},mounted:function mounted(){var _this=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.loadCandidates();case 2:_this.candidates=_context.sent,_this.chosenCandidates=_this.candidates.filter((function(_ref){return _ref.status===JobRequest_1.JobRequestStatus.ACCEPTED}));case 4:case"end":return _context.stop()}}),_callee)})))()},methods:{loadCandidates:function loadCandidates(){var _this2=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var jobRequests;return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,(0,JobsService_1.loadJobRequests)(_this2.job);case 2:return jobRequests=_context3.sent,_context3.next=5,Promise.all(jobRequests.map(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(request){var _a,candidate;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(_context2.t0=request.applicant,_context2.t0){_context2.next=5;break}return _context2.next=4,(0,UserService_1.loadUserProfile)(request.applicantId);case 4:_context2.t0=_context2.sent;case 5:return candidate=_context2.t0,_context2.abrupt("return",_objectSpread(_objectSpread({label:(0,utils_1.getFullName)(candidate),status:request.status,requestId:request.id},request.offer),{},{salaryUnit:(null===(_a=request.offer)||void 0===_a?void 0:_a.salaryUnit)||_this2.job.salaryUnit}));case 7:case"end":return _context2.stop()}}),_callee2)})));return function(_x){return _ref2.apply(this,arguments)}}()));case 5:return _context3.abrupt("return",_context3.sent);case 6:case"end":return _context3.stop()}}),_callee3)})))()},acceptChosenCandidates:function acceptChosenCandidates(){this.chosenCandidates.forEach((function(candidate){(0,JobRequestsService_1.acceptJobRequest)(candidate.requestId,{salary:candidate.salary,salaryUnit:candidate.salaryUnit,startDate:candidate.startDate},!0)}))},unpublishJob:function unpublishJob(){var _this3=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var _yield,isValid,errors;return regeneratorRuntime.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(_this3.foundEmployee!==Job_1.EndedHow.notDecided){_context4.next=11;break}return _context4.next=3,(0,job_1.validateUnpublishedJob)({endDate:_this3.chosenEndDate});case 3:if(_yield=_context4.sent,isValid=_yield.isValid,errors=_yield.errors,_this3.errors=errors,isValid){_context4.next=9;break}return _context4.abrupt("return");case 9:_context4.next=18;break;case 11:if(_this3.foundEmployee!==Job_1.EndedHow.success){_context4.next=18;break}return _context4.next=14,_this3.candidatesListRef.validateCandidates();case 14:if(_context4.sent){_context4.next=17;break}return _context4.abrupt("return");case 17:try{_this3.acceptChosenCandidates()}catch(e){console.error("Saving job request unsuccessful",e)}case 18:_this3.$emit("close",_objectSpread({endedHow:_this3.foundEmployee,whereFound:_this3.resolvedNotFoundEmployeeReason},_this3.chosenEndDate?{endDate:_this3.chosenEndDate}:void 0));case 19:case"end":return _context4.stop()}}),_callee4)})))()}}})},3123:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return render})),__webpack_require__.d(__webpack_exports__,"b",(function(){return staticRenderFns}));var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("CFormGroup",{attrs:{label:"Vybrali sme uchádzača(ov):"}},[_c("CFormAutocomplete",{attrs:{autoexpand:"","id-key":"requestId","label-key":"label",placeholder:"Kliknite sem alebo začnite písať meno uchádzača",suggestions:_vm.candidates,value:_vm.value},on:{add:_vm.addChosenCandidate,remove:_vm.removeChosenCandidate}})],1),_vm._v(" "),_vm._l(_vm.value,(function(candidate){return _c("div",{key:candidate.requestId,staticClass:"divide-y"},[_c("JobModalCandidate",{ref:"candidate",refInFor:!0,staticClass:"py-2",attrs:{candidate:candidate,job:_vm.job,"with-salary":_vm.withSalary},on:{input:function($event){return _vm.updateChosenCandidate(candidate.requestId,$event)}}})],1)}))],2)},staticRenderFns=[]},3550:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return render})),__webpack_require__.d(__webpack_exports__,"b",(function(){return staticRenderFns}));var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("modal-layout",{staticClass:"unpublish-job-modal",attrs:{"prevent-backdrop-click":"",title:"Podarilo sa vám vybrať niekoho z GROWNi uchádzačov?",width:"800"},scopedSlots:_vm._u([{key:"footer",fn:function(){return[_c("CButton",{attrs:{disabled:!_vm.canSubmit,size:"large",variant:"primary"},on:{click:function($event){return _vm.unpublishJob()}}},[_vm._v("\n            Potvrdiť a nezobrazovať ponuku\n        ")])]},proxy:!0}])},[_c("CFormGroup",{staticClass:"mb-10"},[_c("CFormRadio",{attrs:{options:_vm.findEmployeeOptions},model:{value:_vm.foundEmployee,callback:function($$v){_vm.foundEmployee=$$v},expression:"foundEmployee"}})],1),_vm._v(" "),_vm.job&&"success"===_vm.foundEmployee?[_c("JobModalCandidatesList",{ref:"candidatesList",attrs:{candidates:_vm.candidates,job:_vm.job,"with-salary":_vm.withSalary},model:{value:_vm.chosenCandidates,callback:function($$v){_vm.chosenCandidates=$$v},expression:"chosenCandidates"}})]:"noSuccess"===_vm.foundEmployee?[_c("CFormGroup",{attrs:{label:"Dajte nám prosím vedieť, prečo ste nevybrali nikoho z growni kandidátov:"}},[_c("CFormRadio",{attrs:{options:_vm.notFoundEmployeeOptions},model:{value:_vm.notFoundEmployeeReason,callback:function($$v){_vm.notFoundEmployeeReason=$$v},expression:"notFoundEmployeeReason"}})],1),_vm._v(" "),_c("CFormGroup",["other"===_vm.notFoundEmployeeReason?_c("CFormInput",{attrs:{maxlength:"200",placeholder:"Iný dôvod"},model:{value:_vm.notFoundEmployeeOtherReason,callback:function($$v){_vm.notFoundEmployeeOtherReason=$$v},expression:"notFoundEmployeeOtherReason"}}):_vm._e()],1)]:"notDecided"===_vm.foundEmployee?[_c("CFormGroup",{staticClass:"mt-5 mb-10",attrs:{error:_vm.errors.endDate,label:"Výberový proces plánujeme ukončiť:"}},[_c("CFormDateInput",{attrs:{"in-future":""},model:{value:_vm.chosenEndDate,callback:function($$v){_vm.chosenEndDate=$$v},expression:"chosenEndDate"}})],1)]:_vm._e()],2)},staticRenderFns=[]}}]);